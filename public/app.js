!function(e){function n(a){if(r[a])return r[a].exports;var t=r[a]={exports:{},id:a,loaded:!1};return e[a].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var r={};n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){"use strict";r(1),r(2),r(3),r(20),function(){return-1!=(navigator.userAgent||"").toUpperCase().indexOf("KAKAOTALK")}()&&Materialize.toast("카카오톡 브라우저에서 플레이하던 중 채팅으로 되돌아가면 게임에서 나가질 수 있습니다. 새로운 브라우저 창에서 게임을 실행해주세요.",15e3),$(document).on("click","#toast-container .toast",function(){$(this).fadeOut(function(){$(this).remove()})});var a=0;$(document).bind("touchstart",function(e){var n=+new Date;a+500>n&&e.preventDefault(),a=n}),$(document).ready(function(){$("select").material_select()})},function(e,n){"use strict";function r(e){return!0}function a(e){return""!==e}function t(e,n,a,t){var s=$("#"+n),o={};if(!s)return console.log("Unknown form '"+n+"'"),!1;for(var d=0;d<a.length;d++){var c=i(a[d],4),u=c[0],l=c[1],p=c[2],f=c[3];if(p||(p=r),f||(f="허용되지 않은 입력입니다."),o[l]=s.find("#"+u).val(),!p(o[l]))return window.alert(f),!1}return s.find("input, textarea").prop("disabled",!0),$.ajax({type:"POST",url:e,data:o,dataType:"json",success:function(e){e.error?(s.find("input, textarea").prop("disabled",!1),window.alert(e.error)):t(e)},error:function(e,n,r){console.log(n,"message : "+e.responseText+"\nerror : "+r)}}),!0}var i=function(){function e(e,n){var r=[],a=!0,t=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(r.push(s.value),!n||r.length!==n);a=!0);}catch(e){t=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(t)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.issueLogin=function(){t("/login","loginForm",[["username","username",a,"아이디를 입력하세요."],["password","password",a,"패스워드를 입력하세요."]],function(){window.location.reload(!0)})},window.issueRegister=function(){t("/join","registerForm",[["username","username",a,"아이디를 입력하세요."],["password","password",a,"패스워드를 입력하세요."],["email","email",a,"이메일을 입력하세요."]],function(){window.alert("메일에 있는 링크를 클릭해서 계정을 활성화하세요."),window.location.href="/"})},window.issueLogout=function(){$.ajax({type:"POST",url:"/logout",success:function(e){window.location.reload(!0)},error:function(e,n,r){console.log(n,"message : "+e.responseText+"\nerror : "+r)}})}},function(e,n){"use strict";$(function(){function e(e){for(var n="",r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=0;a<e;a++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}$("#roomURL").attr("pattern","^"+location.origin+"/[a-zA-Z0-9]{8}|$"),$("#joinRoom").submit(function(n){var r=$("#roomURL"),a=r.val();if(""===a){var t=e(8);a=window.location.origin+"/"+t,r.val(a)}window.location.href=a,n.preventDefault()})})},function(e,n,r){"use strict";function a(){c=i(),c.on("err",function(e){t.toast(e,3e3)}),c.on("info",function(e){}),c.on("cmd",function(e){var n=s.decompressCommand(e);o.translateCmdMessage(n)}),c.on("reconnect",function(){}),c.on("disconnect",function(){})}var t=window.Materialize,i=window.io,s=r(4),o=r(10),d=r(19),c=void 0,u=$("#gameDiv");0!==u.length&&u.ready(function(){t.toast("로딩중",1500),d(a)}),n.emit=function(e,n){c?c.emit(e,n):console.log("Socket not yet initialized : ",e,n)},window.sendCmd=n.sendCmd,r(14).setEmitFunc(n.emit)},function(e,n,r){"use strict";function a(e){if(Array.isArray(e))return 0===e.length?[]:void 0!==e[0].cardEnvID?["*"].concat(e.map(function(e){return e.cardEnvID})):e.map(a);if(null===e)return null;if("object"==(void 0===e?"undefined":i(e))){var n={};return Object.keys(e).forEach(function(r){void 0===e[r]||(null===e[r]?n[r]=null:void 0!==e[r].cardEnvID?n["*"+r]=e[r].cardEnvID:n[r]=a(e[r]))}),n}return"number"==typeof e&&isNaN(e)?void 0:e}function t(e){if(Array.isArray(e))return 0===e.length?[]:"*"==e[0]?e.slice(1).map(d.decodeCard):e.map(t);if(null===e)return null;if("object"==(void 0===e?"undefined":i(e))){var n={};return Object.keys(e).forEach(function(r){"*"==r[0]?n[r.substr(1)]=d.decodeCard(e[r]):n[r]=t(e[r])}),n}return"number"==typeof e&&isNaN(e)?void 0:e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={},o={},d=r(5);n.compressCommand=function(e){if("string"==typeof e)return e;var n=s[e.type];return n?n(e):a(e)},n.decompressCommand=function(e){if("string"!=typeof e)return t(e);var n=o[e[0]];return n?n(e)||e:t(e)},n.registerCompressor=function(e){var n=e.type,r=e.shead,a=e.cmpf,t=e.dcmpf,i=e.keys;if(s[n]||o[r])throw new Error("Duplicate compressor "+n+" "+r);a||t||!i||(a=d.createJsonCompressor(r,i),t=d.createJsonDecompressor(n,i)),s[n]=a,o[r]=t},r(6),r(7),r(8),r(9)},function(e,n){"use strict";function r(e){return{shape:a[e/13|0],num:52==e?0:e%13+2,cardEnvID:e}}var a=["spade","heart","clover","diamond","joker"];n.decodeCard=r;var t={C:{enc:function(e){return e.cardEnvID},dec:function(e){return r(e)}},F:{enc:function(e){return e},dec:function(e){return Number(e)}},I:{enc:function(e){return e},dec:function(e){return 0|e}},B:{enc:function(e){return 0|e},dec:function(e){return Boolean(0|e)}}};n.createJsonCompressor=function(e,n){return function(r){var a=[];return n.forEach(function(e){var n=t[e[0]];n?a.push(n.enc(r[e.substring(1)])):a.push(r[e])}),e+a.join(";")}},n.createJsonDecompressor=function(e,n){return function(r){var a=r.substr(1).split(";"),i={type:e},s=0;return n.forEach(function(e){var n=t[e[0]];n?i[e.substring(1)]=n.dec(a[s]):i[e]=a[s],s++}),i}}},function(e,n,r){"use strict";var a=r(4);r(5);a.registerCompressor({type:"rjoin",shead:"j",keys:["username","useridf","Frating"]}),a.registerCompressor({type:"rusers",shead:"u",cmpf:function(e){var n=["u",e.owner];return n.push(e.youridf),e.users.forEach(function(e){n.push(e.username),n.push(e.useridf),n.push(e.rating)}),n.join(";")},dcmpf:function(e){for(var n=e.split(";"),r=[],a=3;a<n.length;a+=3)r.push({username:n[a],useridf:n[a+1],rating:Number(n[a+2])});return{type:"rusers",owner:0|n[1],youridf:n[2],users:r}}}),a.registerCompressor({type:"rleft",shead:"l",keys:["useridf","Iowner"]})},function(e,n,r){"use strict";var a=r(4),t=r(5);a.registerCompressor({type:"gusers",shead:"U",cmpf:function(e){var n=["U"];return e.users.forEach(function(e){n.push(e.username),n.push(e.useridf),n.push(e.rating)}),n.join(";")},dcmpf:function(e){for(var n=e.split(";"),r=[],a=1;a<n.length;a+=3)r.push({username:n[a],useridf:n[a+1],rating:Number(n[a+2])});return{type:"gusers",users:r}}}),a.registerCompressor({type:"deck",shead:"D",cmpf:function(e){var n=["D"];return e.deck.forEach(function(e){n.push(e.cardEnvID)}),n.join(";")},dcmpf:function(e){return{type:"deck",deck:e.split(";").slice(1).map(t.decodeCard)}}})},function(e,n,r){"use strict";var a=r(4);r(5);a.registerCompressor({type:"pcp",shead:"C",keys:["Iplayer","Ccard","Bjcall"]}),a.registerCompressor({type:"tend",shead:"T",keys:["Iwinner"]})},function(e,n,r){"use strict";var a=r(4);r(5);a.registerCompressor({type:"binfo",shead:"B",keys:["Ipresident","shape","Inum"]}),a.registerCompressor({type:"pbinfo",shead:"p",keys:["Ibidder","bidShape","IbidCount"]})},function(e,n,r){"use strict";var a={},t=window.Materialize,i=(r(11),r(13));n.translateCmdMessage=function(e){a[e.type]?a[e.type](e):t.toast("Unknown command message type : "+e.type,4e3)},r(15)(a),r(16)(a),r(17)(a),r(18)(a),a.gabort=function(e){var n=e.msg||"게임이 중간에 종료되었습니다.";t.toast(n,3e3),i.playing=!1,i.viewRoom(),$("#title").text("openMighty")}},function(e,n,r){"use strict";var a={},t=r(12);n=e.exports=a,n.viewDeck=function(){var e=$("#gameDiv .deck");e.empty();for(var n=0;n<a.deck.length;n++){var r=a.deck[n],i=[r.shape,r.num],s=i[0],o=i[1],d=t(null,"deck-card"),c=s[0]+o;d.find(".game-card").attr("card",c).addClass("game-card-"+c).addClass("game-card-shape-"+s[0]),e.append(d)}},n.shapeAbbrTable={spade:"♠",heart:"♥",diamond:"♦",clover:"♣",none:"N"},n.shapeStringTable={spade:"스페이드",heart:"하트",diamond:"다이아몬드",clover:"클로버",none:"노기루다"},n.numStringTable=[void 0,void 0,"2","3","4","5","6","7","8","9","10","J","Q","K","A"]},function(e,n){"use strict";var r=function(){function e(e,n){var r=[],a=!0,t=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(r.push(s.value),!n||r.length!==n);a=!0);}catch(e){t=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(t)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=window.Materialize,t=["text","val","submit","click","remove","empty","addClass","removeClass"," toggleClass"],i=["disabled"],s=void 0;$(function(){s=$("#game-template"),s.detach()}),e.exports=function(e,n,o){function d(e){var n=r(e,2),a=n[0],s=n[1];-1!=t.indexOf(a)?u[a](s):-1!=i.indexOf(a)?u.prop(a,s):u.attr(a,s)}var c=s.find("#template-"+n).clone().removeAttr("id"),u=void 0;if(o)for(var l=0;l<o.length;l++){var p=r(o[l],2),f=p[0],m=p[1];u=f?c.find(f):c,1==u.length?Array.isArray(m[0])?m.forEach(d):(null!==m&&"string"!=typeof m||(m=[o[l][1],o[l][2]]),d(m)):(a.toast("Invalid selector : "+f,4e3),console.log("Invalid selector",o[l]))}return e&&(e.empty(),e.append(c)),$("select").material_select(),c},e.exports.getTemplate=function(e){return s.find("#template-"+e)}},function(e,n,r){"use strict";function a(){var e=$(".player-self").find(".game-card-container");o(e,"button").focus(),e.find("button").click(function(e){s.sendStartGame(),$(".player-has").empty(),e.preventDefault()})}var t=r(11),i={playing:!1,myidf:null,owner:0,users:[]},s=r(14),o=r(12);n=e.exports=i,n.viewRoom=function(){var e=void 0,n=void 0,r=void 0;i.playing?(n=-1,e=t.gameUsers,r=t.president):(n=i.owner,e=i.users,r=-1);var s=$(".player-slot");s.removeClass("player-empty player-owner player-president player-self player-ai player-leading");var o=null;s.find(".player-has").addClass("player-has-disabled").empty(),s.find(".player-name").unbind("click"),$(".last-trick").empty();for(var d=0;d<e.length;d++)!function(a){var t=$(s[a]),d=e[a],c=t.find(".player-name");c.text(d.username+" ("+d.rating.toFixed(1)+")"),i.playing||c.click(function(){window.open("/profile/"+d.username)}),t.find(".game-card-container").empty(),n===a&&t.addClass("player-owner"),r===a&&t.addClass("player-president"),d.useridf==i.myidf&&(t.addClass("player-self"),o=a)}(d);for(var d=e.length;d<5;d++){var c=$(s[d]);c.addClass("player-empty"),c.find(".player-name").text("Empty"),c.find(".game-card-container").empty()}i.playing?t.selfIndex=o:n===o&&a()},window.onbeforeunload=function(e){if(i.playing){e=e||window.event;var n="게임 중에 퇴장하면 중간에 다시 들어오실 수 없습니다. 나가시겠습니까?";return e&&(e.returnValue=n),n}}},function(e,n,r){"use strict";function a(e,n){var r=Object.assign({},n||{});return r.type=e,i("cmd",t.compressCommand(r)),!0}var t=r(4),i=void 0;n.setEmitFunc=function(e){i=e},n.sendStartGame=function(){a("start")},n.sendBidding=function(e,n){a("bid",{shape:e,num:parseInt(n)})},n.sendBidChange1=function(e,n){a("bc1",{shape:e,num:n})},n.sendFriendSelectAndDiscard3=function(e){a("fs",e)},n.sendCardPlay=function(e,n){n=n||{jcall:!1},a("cp",{cardIdx:e,jcall:n.jcall||void 0,srq:n.callShape||void 0})}},function(e,n,r){"use strict";var a=r(13),t=r(11),i=window.Materialize;e.exports=function(e){e.rjoin=function(e){i.toast(e.username+"님이 입장하셨습니다.",2e3),a.users.push({username:e.username,useridf:e.useridf,rating:e.rating}),a.viewRoom()},e.rleft=function(e){for(var n=a.users,r=0;r<n.length;r++){var s=n[r];if(s.useridf==e.useridf){a.playing?i.toast(s.username+"님이 탈주하셨습니다.",2e3):i.toast(s.username+"님이 퇴장하셨습니다.",2e3),n.splice(r,1);break}}if(a.owner=e.owner,a.playing){for(var o=t.gameUsers,d=0;d<o.length;d++)if(o[d].useridf==e.useridf){$($(".player-slot")[d]).addClass("player-ai");break}}else a.viewRoom()},e.rusers=function(e){a.owner=e.owner,a.users=e.users,a.myidf=e.youridf,a.viewRoom()}}},function(e,n,r){"use strict";var a=window.Materialize,t=r(12),i=r(11),s=r(13),o=r(14);e.exports=function(e){function n(e){if(!e.canDealMiss)return!1;var n=e.deck,r=0;return n.forEach(function(e){"spade"==e.shape&&14==e.num||("joker"==e.shape&&0===e.num?r-=1:10==e.num?r+=.5:e.num>=11&&(r+=1))}),r<=.51}e.gusers=function(e){i.gameUsers=e.users,i.president=-1,i.remainingBidder=5,i.lastBidder=null,i.bidCount=null,i.bidShape=null,i.canDealMiss=!0,s.playing=!0,s.viewRoom()},e.deck=function(e){i.deck=e.deck,i.viewDeck()},e.pbinfo=function(e){var n=$($(".player-slot .game-card-container")[e.bidder]);e.bidder==i.selfIndex&&(i.canDealMiss=!1),"pass"!=e.bidShape&&(i.bidShape=e.bidShape,i.bidCount=e.bidCount,i.lastBidder=e.bidder),n.find(".game-card").remove();var r=$("<div/>").addClass("game-card player-card-bidding");"pass"==e.bidShape?(r.text("pass"),i.remainingBidder--):r.text(e.bidShape+" "+e.bidCount),n.append(r),1==i.remainingBidder&&null!==i.lastBidder&&(i.lastBidder!=i.selfIndex&&a.toast("공약이 끝났습니다. 기다려주세요",1500),i.president=i.lastBidder)},e.bidrq=function(){var e=i.bidCount||13;"none"==i.bidShape&&e++;var r=$(".player-self .game-card-container"),a=t(r,"bidding");n(i)&&a.find("select[name=bidShape]").prepend($("<option/>").text("딜미스").val("dealmiss")).val("dealmiss"),a.attr("id","bidForm"),a.find('input[name="bidCount"]').attr("min",e).val(e),a.submit(function(){var e=$("#bidForm"),n=e.find('*[name="bidShape"]').val(),r=e.find('*[name="bidCount"]').val();return o.sendBidding(n,r),!1})},e.bc1rq=function(){a.toast("공약을 수정해주세요.",1500);var e=i.bidShape,n=i.bidCount,r=$(".player-self .game-card-container");t(r,"bidding",[[null,["id","bidChangeForm"]],[".player-form-title",["text","현재 : "+i.shapeAbbrTable[e]+n]],['input[name="bidCount"]',[["min",n],["val",n]]],['option[value="'+e+'"]',["remove"]],['option[value="pass"]',[["val",e],["text","그대로 ("+i.shapeStringTable[e]+")"]]],[null,["submit",function(){var e=$("#bidChangeForm"),n=e.find('*[name="bidShape"]').val(),r=0|e.find('*[name="bidCount"]').val();return n==i.bidShape&&r==i.bidCount&&(n="pass"),o.sendBidChange1(n,r),!1}]]]).focus()},e.binfo=function(e){$(".player-slot .game-card-container").empty();var n=i.shapeStringTable[e.shape]+" "+e.num;a.toast("공약 : "+n,1500),$("#title").text("openMighty - "+n),i.bidShape=e.shape,i.bidCount=e.num,i.president=e.president,$($(".player-slot")[i.president]).addClass("player-leading player-president")}}},function(e,n,r){"use strict";var a=window.Materialize,t=window._,i=r(12),s=(r(13),r(11)),o=r(14),d=r(18);e.exports=function(e){function n(e){return{mighty:{shape:"spade"==e?"diamond":"spade",num:14},joker:{shape:"joker",num:0},girudaA:{shape:e,num:14},girudaK:{shape:e,num:13},girudaQ:{shape:e,num:12},girudaJ:{shape:e,num:11},card_sA:{shape:"spade",num:14},card_sK:{shape:"spade",num:13},card_hA:{shape:"heart",num:14},card_hK:{shape:"heart",num:13},card_dA:{shape:"diamond",num:14},card_dK:{shape:"diamond",num:13},card_cA:{shape:"clover",num:14},card_cK:{shape:"clover",num:13}}}function r(e,r,a){if(null===e)return!1;var t=n(e);if(t[r]){var i=t[r];return a.ftype="card",a.shape=i.shape,a.num=i.num,!0}return"first"==r?(a.ftype="first",!0):r.startsWith("player")?(a.ftype="player",a.friend=parseInt(r.substr(7))-1,!0):"none"==r&&(a.ftype="none",!0)}function c(e,r){var a=n(e);if("card"==r.ftype){var o=null;return t.keys(a).some(function(e){var n=a[e];if(n.shape==r.args.shape&&n.num==r.args.num)return o=e,!0}),o?i.getTemplate("fselect").find('option[value="'+o+'"]').text()+" 프렌드":s.shapeStringTable[r.args.shape]+" "+s.numStringTable[r.args.num]+" 프렌드"}return"first"==r.ftype?"선구 프렌드":"none"==r.ftype?"노프렌드":"player"==r.ftype?($($(".player-slot")[r.args]).addClass("player-leading"),s.gameUsers[r.args].username+" 프렌드"):"알수없는 프렌드 - "+String(r.ftype)}e.fsrq=function(){a.toast("카드 3장을 버리고 프렌드를 선정하세요",1500),$(".deck-card").click(function(){$(this).toggleClass("deck-card-selected")});var e=s.bidCount,n=s.bidShape,t=$(".player-self .game-card-container");i(t,"fselect",[[null,["id","friendSelectForm"]],["option[value="+n+"]",["remove"]],['input[name="bidCount"]',[["min",e],["val",e]]],['option[value="pass"]',["val",n]]]).submit(function(e){e.preventDefault();for(var n={},t=$("#friendSelectForm"),i=$("#gameDiv .deck .deck-card").toArray(),d=[],c=0;c<i.length;c++)$(i[c]).hasClass("deck-card-selected")&&d.push(c);if(3!=d.length)return a.toast("3장을 골라주세요.",1500),!1;n.discards=d;var u=t.find('*[name="bidShape"]').val(),l=t.find('*[name="bidCount"]').val();return u==s.bidShape&&l==s.bidCount||(n.bidch2={shape:u,num:parseInt(l)}),r(u,t.find("select[name=friendType]").val(),n)?(o.sendFriendSelectAndDiscard3(n),!1):(a.toast("프렌드를 선정해주세요.",1500),!1)})},e.fs=function(e){var n=c(s.bidShape,e);a.toast(n,2e3),s.ftype=e.ftype,s.fargs=e.args;var r=$("#title");r.text(r.text()+" - "+n),d.initGame()}}},function(e,n,r){"use strict";function a(){t(),c.trick++}function t(){$("#gameDiv .deck-card").removeClass("deck-card-selected").unbind("click"),$(".player-has-disabled").removeClass("player-has-disabled")}function i(){c.trick=0,c.starter=c.president,a()}function s(e){var n=e.attr("card");return{shape:{s:"spade",h:"heart",c:"clover",d:"diamond",j:"joker"}[n[0]],num:parseInt(n.substr(1))}}var o=window.Materialize,d=r(12),c=r(11),u=r(13),l=r(14);n=e.exports=function(e){function n(e){var n=$("#gameDiv .deck"),r=n.find(".game-card-j0"),a=n.find("spade"==c.bidShape?".game-card-d14":".game-card-s14");if(r.parents(".deck-card").addClass("deck-card-selectable"),a.parents(".deck-card").addClass("deck-card-selectable"),1==c.trick&&c.president==c.selfIndex){var t=void 0;for(t=0;t<10&&c.deck[t].shape==c.bidShape;t++);if(10!=t)return $(".deck-card").addClass("deck-card-selectable"),void $(".deck-card .game-card-shape-"+c.bidShape[0]).parents(".deck-card").removeClass("deck-card-selectable")}if(e.jcall){if(0!==r.length)return}else if(e.shaperq){var i=n.find(".game-card-shape-"+e.shaperq[0]);if(0!==i.length)return void i.parents(".deck-card").addClass("deck-card-selectable")}$(".deck-card").addClass("deck-card-selectable")}function r(e){if("joker"==e.shape)return $("<div/>").addClass("has-slot has-joker").text("Joker");var n=["2","3","4","5","6","7","8","9","10","J","Q","K","A"][e.num-2];return $("<div/>").addClass("has-slot").addClass("has-"+e.shape).text(n)}e.cprq=function(e){o.toast("카드를 내주세요.",1500);var r=$(".player-self .game-card-container");d(r,"button",[["button",[["text","카드 내기"],["disabled",!0]]]]),n(e);var a=$(".deck-card-selectable");a.click(function(){$(".deck-card").removeClass("deck-card-selected"),$(this).addClass("deck-card-selected"),r.find("button").prop("disabled",!1)}),a.dblclick(function(){r.find("button").click()}),r.find("button").click(function(){var e=$(".deck-card-selected");1!=e.length&&o.toast("카드를 선택해주세요.",1500);var n=s(e.find(".game-card"));if(1!=c.trick&&3==n.num&&c.starter==c.selfIndex&&("clover"==c.bidShape&&"spade"==n.shape||"clover"!=c.bidShape&&"clover"==n.shape)){var r=$("#jokerCallModal");r.find("button[name=no]").click(function(){l.sendCardPlay(e.index(".deck-card"))}),r.find("button[name=yes]").click(function(){l.sendCardPlay(e.index(".deck-card"),{jcall:!0})}),r.modal({dismissible:!1}),r.modal("open")}else if("joker"==n.shape&&c.starter==c.selfIndex){var a=$("#jokerModal"),t=a.find("select[name=srq]");t.val("none"),a.modal({dismissible:!1}),a.find("button").click(function(){var n=t.val();"none"==n&&(n=void 0),l.sendCardPlay(e.index(".deck-card"),{callShape:n})}),a.modal("open")}else l.sendCardPlay(e.index(".deck-card"))})},e.jrq=function(e){var n=e.shaperq;o.toast("조커로 "+c.shapeStringTable[n]+"를 불렀습니다.",2e3)},e.pcp=function(e){var n=e.card,r=$($(".player-slot")[e.player]);"card"==c.ftype&&c.fargs.shape==n.shape&&c.fargs.num==n.num&&r.addClass("player-leading");var a=r.find(".game-card-container"),i=n.shape[0]+n.num;d(a,"game-card",[[null,[["addClass","game-card-"+i],["card",i]]]]),t()},e.tend=function(e){var n=$($(".player-has")[e.winner]),t=$(".player-slot .game-card"),i=$(".last-trick");i.empty(),t.each(function(){var e=s($(this));i.append(r(e)),e.num>=10&&n.append(r(e))}),"first"==c.ftype&&c.president!=e.winner&&2!=$(".player-leading").length&&c.trick<=4&&$($(".player-slot")[e.winner]).addClass("player-leading"),t.fadeOut(1e3),c.starter=e.winner,a()},e.gend=function(e){var n=c.bidCount,r=20-e.oppcc,a=void 0;if(void 0!==e.setUser){a=$("#gameEndWithSetModal"),a.find(".set").text("게임 결과 - 셋 ("+c.gameUsers[e.setUser].username+")");var t=a.find(".deck");t.empty(),e.setDeck.forEach(function(e){var n=[e.shape,e.num],r=n[0],a=n[1],i=d(null,"deck-card"),s=r[0]+a;i.find(".game-card").attr("card",s).addClass("game-card-"+s).addClass("game-card-shape-"+r[0]),t.append(i)})}else a=$("#gameEndModal");var i=a.find(".modal-content p.score");r>=n?i.text("["+r+"/"+n+"] 여당 승리입니다."):i.text("["+r+"/"+n+"] 야당 승리입니다."),u.playing=!1,a.modal({dismissible:!0,complete:function(){u.playing||(u.viewRoom(),$("#title").text("openMighty"))}}),a.modal("open")}},n.issueTrickStart=a,n.initGame=i},function(e,n){"use strict";var r=function(){function e(e,n){var r=[],a=!0,t=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(r.push(s.value),!n||r.length!==n);a=!0);}catch(e){t=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(t)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=function(e){function n(){var n=document.createElement("canvas");n.width=129,n.height=185;var i=n.getContext("2d"),s=[];t.forEach(function(e){var t=r(e,3),o=t[0],d=t[1],c=t[2];i.drawImage(a,d,c,129,185,0,0,129,185);var u=n.toDataURL();s.push(".game-card-"+o+" {  background-image: url("+u+");}")}),$("<style>").prop("type","text/css").html(s.join("")).appendTo("head"),e&&e()}var a=new Image;a.onload=n,a.src="/images/cards/sprite.png";var t=[["c10",129,0],["c11",774,370],["c12",258,0],["c13",0,185],["c14",129,185],["c2",258,185],["c3",387,0],["c4",387,185],["c5",516,0],["c6",516,185],["c7",0,370],["c8",129,370],["c9",258,370],["d10",387,370],["d11",516,370],["d12",645,0],["d13",645,185],["d14",645,370],["d2",0,555],["d3",129,555],["d4",258,555],["d5",387,555],["d6",516,555],["d7",645,555],["d8",774,0],["d9",774,185],["h10",0,0],["h11",774,555],["h12",903,0],["h13",903,185],["h14",903,370],["h2",903,555],["h3",0,740],["h4",129,740],["h5",258,740],["h6",387,740],["h7",516,740],["h8",645,740],["h9",774,740],["j0",903,740],["s10",1032,0],["s11",1032,185],["s12",1032,370],["s13",1032,555],["s14",1032,740],["s2",0,925],["s3",129,925],["s4",258,925],["s5",387,925],["s6",516,925],["s7",645,925],["s8",774,925],["s9",903,925]]}},function(e,n){"use strict";var r=!1;window.viewGameLog=function(e){e|=0,r||($.ajax({type:"GET",url:"/gamelog/"+e+"?popup=1",success:function(n){var a=$("#gameLogModal");a.find(".modal-content").html(n),a.find(".modal-footer a").attr("href","/gamelog/"+e),a.modal(),a.modal("open"),r=!1},error:function(e,n,a){console.log(n,"message : "+e.responseText+"\nerror : "+a),r=!1}}),r=!0)}}]);