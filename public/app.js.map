{"version":3,"sources":["webpack:///webpack/bootstrap 825b12cb0943d8ef9152","webpack:///./src/clientjs/main.js","webpack:///./src/clientjs/formIssuer.js","webpack:///./src/clientjs/roomjoin.js","webpack:///./src/clientjs/game/conn.js","webpack:///./src/clientjs/game/procCmd.js","webpack:///./src/clientjs/game/game.js","webpack:///./src/clientjs/game/template.js","webpack:///./src/clientjs/game/room.js","webpack:///./src/clientjs/game/cmdRoom.js","webpack:///./src/clientjs/game/cmdBidding.js","webpack:///./src/clientjs/game/cmdFriendSelect.js","webpack:///./src/clientjs/game/cmdMainGame.js"],"names":["require","$","modal","window","issueRegister","issueForm","formVerifier_NoBlank","formVerifier_AlwaysAllow","location","reload","issueLogout","ajax","type","url","success","data","error","jqXHR","textStatus","errorThrown","console","log","responseText","value","formName","nameTable","callback","targetForm","ajaxData","i","length","inputName","postName","formVerifier","errorMsg","find","val","alert","prop","dataType","generateRandomID","text","charset","charAt","Math","floor","random","attr","origin","submit","e","$roomURL","roomURL","randomID","href","preventDefault","Materialize","io","cmdproc","socket","ready","on","msg","toast","translateCmdMessage","exports","sendCmd","object","copy","Object","assign","emit","cmdTranslatorMap","game","room","gabort","obj","playing","viewRoom","template","module","viewDeck","$playerDeck","empty","deck","card","shape","num","$deckCardContainer","cardIdf","addClass","append","shapeAbbrTable","shapeStringTable","jqueryMethods","properties","$parent","name","attrs","$template","clone","removeAttr","$elm","selector","attributes","Array","isArray","forEach","applyAttribute","attribute","indexOf","myidf","owner","users","conn","president","gameUsers","$playerSlots","removeClass","self","$playerSlot","user","username","useridf","addStartButton","selfIndex","$gameCardContainer","click","rjoin","push","rleft","splice","rusers","youridf","gusers","remainingBidder","lastBidder","pbinfo","$bidderCardContainer","bidder","bidShape","bidCount","remove","$biddingInfo","bidrq","$playerCardContainer","$bidForm","parseInt","bc1rq","$bidChangeForm","binfo","bidString","_","mainGame","genCardMap","encodeFriend","friendType","cardMap","friendCard","ftype","decodeFriend","keys","some","key","args","fsrq","toggleClass","$friendSelector","$fSelectForm","cards","toArray","selected","hasClass","discards","bidch2","fs","friendString","fargs","$title","initGame","issueTrickStart","unbindClick","trick","unbind","starter","decodeCard","$card","substr","filterSelectableCards","jcall","jokerCard","parents","shaperq","$rqShapeCards","cprq","$selected","$jokerCallModal","cardIdx","index","dismissible","$jokerModal","$callShape","callShape","undefined","srq","jrq","shapeRequest","pcp","player","tend","$winnerHas","winner","$cards","each","numStr","fadeOut","gend","bid","got","oppcc","$modal","$modalText","complete"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 825b12cb0943d8ef9152","/**\n * Created by whyask37 on 2017. 1. 19..\n */\n\n\"use strict\";\n\nrequire('./formIssuer');\nrequire('./roomjoin');\nrequire('./game/conn');\n\n$(function() {\n    $('#jokerCall').modal('open');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/main.js","\"use strict\";\n\nwindow.issueRegister = function () {\n    'use strict';\n    issueForm(\n        '/users/register',\n        'registerForm',\n        [\n            ['username', 'username', formVerifier_NoBlank, '이름을 입력하세요.'],\n            ['useridf', 'useridf', formVerifier_AlwaysAllow, ''],\n        ],\n        function() {\n            window.location.reload(true);\n        }\n    );\n};\n\nwindow.issueLogout = function () {\n    $.ajax({\n        type: 'POST',\n        url: '/users/logout',\n        success: function(data) {\n            window.location.reload(true);\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n            console.log(textStatus, 'message : ' + jqXHR.responseText + '\\nerror : ' + errorThrown);\n        }\n    });\n}\n\n\n//////////\n\n\nfunction formVerifier_AlwaysAllow(value) {\n    return true;\n}\n\nfunction formVerifier_NoBlank(value) {\n    return value !== '';\n}\n\n/**\n * Form의 내용을 종합해 Ajax request를 전송합니다. 이 때 form의 input를 임시로 모두 disable시킵니다\n * @param url - ajax를 날릴 URL\n * @param formName - form의 아이디\n * @param nameTable - ajax의 파라미터 정의. 아래 형식 배열의 배열로 되어있다.\n *      [(form 내 name), (ajax 파라미터 이름), formVerifier, (verifier 실패시 메세지)]\n * @param callback(data) - ajax에서 error가 없을 때 낼 동작\n * @returns {boolean} - ajax가 제대로 보내졌는지\n */\nfunction issueForm(url, formName, nameTable, callback) {\n    'use strict';\n\n    const targetForm = $('#' + formName);\n    const ajaxData = {};\n\n    if (!targetForm) {\n        console.log('Unknown form \\'' + formName + '\\'');\n        return false;\n    }\n\n    // Collect form values\n    for(let i = 0 ; i < nameTable.length ; i++) {\n        let [inputName, postName, formVerifier, errorMsg] = nameTable[i];\n        if(!formVerifier) formVerifier = formVerifier_AlwaysAllow;\n        if(!errorMsg) errorMsg = \"허용되지 않은 입력입니다.\";\n\n        ajaxData[postName] = targetForm.find('#' + inputName).val();\n        if(!formVerifier(ajaxData[postName])) {\n            window.alert(errorMsg);\n            return false;\n        }\n    }\n\n    // Disable form temporarilly\n    targetForm.find('input, textarea').prop('disabled', true);\n\n    $.ajax({\n        type: 'POST',\n        url: url,\n        data: ajaxData,\n        dataType: 'json',\n        success: function(data) {\n            if(!data.error) {\n                callback(data);\n            }\n            else {\n                // Re-enable form to allow correction.\n                targetForm.find('input, textarea').prop('disabled', false);\n                window.alert(data.error);\n            }\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n            console.log(textStatus, 'message : ' + jqXHR.responseText + '\\nerror : ' + errorThrown);\n        }\n    });\n    return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/formIssuer.js","/**\n * Created by whyask37 on 2017. 1. 11..\n */\n\n\"use strict\";\n\n// 게임 시작시 할 일들입니다.\n$(function () {\n    /**\n     * 특정 길이의 랜덤 alphanumeric 스트링을 만든다.\n     */\n\n    function generateRandomID(length) {\n        let text = \"\";\n        const charset = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n        for(let i = 0; i < length; i++ )\n            text += charset.charAt(Math.floor(Math.random() * charset.length));\n\n        return text;\n    }\n\n    // RoomURL의 패턴을 설정합니다.\n    $('#roomURL').attr(\n        'pattern',\n        '^' + location.origin + '/[a-zA-Z0-9]{8}|$');\n\n    $('#joinRoom').submit(function (e) {\n        const $roomURL = $('#roomURL');\n        let roomURL = $roomURL.val();\n        if (roomURL === '') {\n            const randomID = generateRandomID(8);\n            roomURL = window.location.origin + \"/\" + randomID;\n            $roomURL.val(roomURL);\n        }\n        window.location.href = roomURL;\n\n        e.preventDefault();\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/roomjoin.js","/**\n * Created by whyask37 on 2017. 1. 19..\n */\n\n\"use strict\";\n\nconst Materialize = window.Materialize;\nconst io = window.io;\n\nconst cmdproc = require('./procCmd');\n\nlet socket;\n\n\n$('#gameDiv').ready(function () {\n    socket = io();\n\n    socket.on('err', function (msg) {\n        Materialize.toast(msg, 3000);\n    });\n\n    socket.on('info', function (msg) {\n        \"use strict\";\n        console.log('info', msg);\n    });\n\n\n    socket.on('cmd', function (msg) {\n        \"use strict\";\n        console.log('cmd', msg);\n        cmdproc.translateCmdMessage(msg);\n    });\n\n    socket.on('disconnect', function () {\n        \"use strict\";\n        // alert('서버와의 연결이 끊겼습니다.');\n    });\n});\n\nexports.sendCmd = function (type, object) {\n    \"use strict\";\n\n    const copy = Object.assign({}, object || {});\n    copy.type = type;\n    socket.emit('cmd', copy);\n    return true;\n};\n\nwindow.sendCmd = exports.sendCmd;\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/conn.js","/**\n * Created by whyask37 on 2017. 1. 11..\n */\n\n\"use strict\";\n\nconst cmdTranslatorMap = {};\nconst Materialize = window.Materialize;\n\nconst game = require('./game');\nconst room = require('./room');\n\nexports.translateCmdMessage = function (msg) {\n    if(cmdTranslatorMap[msg.type]) cmdTranslatorMap[msg.type](msg);\n    else Materialize.toast('Unknown command message type : ' + msg.type, 4000);\n};\n\n///////////////////////////////////\n\n// Room users\nrequire('./cmdRoom')(cmdTranslatorMap);\nrequire('./cmdBidding')(cmdTranslatorMap);\nrequire('./cmdFriendSelect')(cmdTranslatorMap);\nrequire('./cmdMainGame')(cmdTranslatorMap);\n\n\ncmdTranslatorMap.gabort = function (obj) {\n    const msg = obj.msg || '게임이 중간에 종료되었습니다.';\n    Materialize.toast(msg, 3000);\n    room.playing = false;\n    room.viewRoom();\n    $('#title').text('openMighty');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/procCmd.js","/**\n * Created by whyask37 on 2017. 1. 20..\n */\n\n\"use strict\";\n\n\nconst game = {};\nconst template = require('./template');\n\nexports = module.exports = game;\nexports.game = game;\n\n\nexports.viewDeck = function () {\n    const $playerDeck = $('.deck');\n    $playerDeck.empty();\n\n    for (let i = 0; i < game.deck.length; i++) {\n        const card = game.deck[i];\n        const [shape, num] = [card.shape, card.num];\n\n        const $deckCardContainer = template(null, 'deck-card');\n        const cardIdf = shape[0] + num;\n        $deckCardContainer.find('.game-card')\n            .attr('card', cardIdf)\n            .addClass('game-card-' + cardIdf)\n            .addClass('game-card-shape-' + shape[0]);\n        $playerDeck.append($deckCardContainer);\n    }\n};\n\n\n// Various utilities\n\nexports.shapeAbbrTable = {\n    'spade': '♠',\n    'heart': '♥',\n    'diamond': '♦',\n    'clover': '♣',\n    'none': 'N',\n};\n\nexports.shapeStringTable = {\n    'spade': '스페이드',\n    'heart': '하트',\n    'diamond': '다이아몬드',\n    'clover': '클로버',\n    'none': '노기루다',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/game.js","/**\n * Created by whyask37 on 2017. 1. 20..\n */\n\n\"use strict\";\n\nconst Materialize = window.Materialize;\n\nconst jqueryMethods = [\n    'text', 'val', 'submit', 'click', 'remove', 'empty',\n    'addClass', 'removeClass',' toggleClass'\n];\n\nconst properties = [\n    'disabled'\n];\n\nmodule.exports = function ($parent, name, attrs) {\n    const $template = $('#template-' + name).clone().removeAttr('id');\n    let $elm;\n\n    if(attrs) {\n        // Set attributes\n        for (let i = 0; i < attrs.length; i++) {\n            let [selector, attributes] = attrs[i];\n            $elm = selector ? $template.find(selector) : $template;\n            if ($elm.length != 1) {\n                Materialize.toast('Invalid selector : ' + selector, 4000);\n                console.log('Invalid selector', attrs[i]);\n                continue;\n            }\n\n            if (Array.isArray(attributes[0])) {\n                attributes.forEach(applyAttribute);\n            }\n            else {\n                if(attributes === null || typeof attributes == \"string\") {\n                    attributes = [attrs[i][1], attrs[i][2]];\n                }\n                applyAttribute(attributes);\n            }\n        }\n    }\n\n    function applyAttribute(attribute) {\n        const [attr, value] = attribute;\n        if (jqueryMethods.indexOf(attr) != -1) $elm[attr](value);\n        else if (properties.indexOf(attr) != -1) $elm.prop(attr, value);\n        else $elm.attr(attr, value);\n    }\n\n\n    if($parent) {\n        $parent.empty();\n        $parent.append($template);\n    }\n\n    return $template;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/template.js","/**\n * Created by whyask37 on 2017. 1. 20..\n */\n\n\"use strict\";\n\nconst game = require('./game');\nconst room = {\n    playing: false,\n    myidf: null,\n    owner: 0,\n    users: []\n};\nconst conn = require('./conn');\nconst template = require('./template');\n\n\nexports = module.exports = room;\n\nexports.viewRoom = function () {\n    let users, owner, president;\n    if(!room.playing) {\n        owner = room.owner;\n        users = room.users;\n        president = -1;\n    }\n    else {\n        owner = -1;\n        users = game.gameUsers;\n        president = game.president;\n    }\n\n    const $playerSlots = $('.player-slot');\n    $playerSlots.removeClass('player-empty player-owner player-president player-self player-leading');\n\n    let self = null;\n\n    for(let i = 0 ; i < users.length ; i++) {\n        const $playerSlot = $($playerSlots[i]);\n        const user = users[i];\n        $playerSlot.find('.player-name').text(user.username);\n        $playerSlot.find('.game-card-container').empty();\n\n        if(owner === i) $playerSlot.addClass('player-owner');\n        if(president === i) $playerSlot.addClass('player-president');\n        if(user.useridf == room.myidf) {\n            $playerSlot.addClass('player-self');\n            self = i;\n        }\n    }\n\n    for(let i = users.length ; i < 5 ; i++) {\n        const $playerSlot = $($playerSlots[i]);\n        $playerSlot.addClass('player-empty');\n        $playerSlot.find('.player-name').text(\"Empty\");\n        $playerSlot.find('.game-card-container').empty();\n        $playerSlot.find('.player-has').empty();\n    }\n\n    if(!room.playing) {\n        if (owner === self) {\n            addStartButton();\n        }\n    }\n    else {\n        game.selfIndex = self;\n    }\n};\n\n\nfunction addStartButton() {\n    const $gameCardContainer = $('.player-self').find('.game-card-container');\n    template($gameCardContainer, 'button');\n    $gameCardContainer.find('button').click(function(e) {\n        conn.sendCmd('start');\n        $('.player-has').empty();\n        e.preventDefault();\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/room.js","/**\n * Created by whyask37 on 2017. 1. 19..\n */\n\n\"use strict\";\n\nconst room = require('./room');\n\nconst Materialize = window.Materialize;\n\nmodule.exports = function (cmdTranslatorMap) {\n    cmdTranslatorMap.rjoin = function (msg) {\n        \"use strict\";\n        Materialize.toast(msg.username + '님이 입장하셨습니다.', 2000);\n        room.users.push({\n            username: msg.username,\n            useridf: msg.useridf\n        });\n        room.viewRoom();\n    };\n\n    cmdTranslatorMap.rleft = function (msg) {\n        \"use strict\";\n        const users = room.users;\n        for (let i = 0; i < users.length; i++) {\n            const user = users[i];\n            if (user.useridf == msg.useridf) {\n                Materialize.toast(user.username + '님이 퇴장하셨습니다.', 2000);\n                users.splice(i, 1);\n                break;\n            }\n        }\n        room.owner = msg.owner;\n        if (!room.playing) room.viewRoom();\n    };\n\n    cmdTranslatorMap.rusers = function (msg) {\n        \"use strict\";\n        room.owner = msg.owner;\n        room.users = msg.users;\n        room.myidf = msg.youridf;\n        room.viewRoom();\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/cmdRoom.js","/**\n * Created by whyask37 on 2017. 1. 20..\n */\n\n\"use strict\";\n\nconst Materialize = window.Materialize;\n\nconst template = require('./template');\nconst game = require('./game');\nconst room = require('./room');\nconst conn = require('./conn');\n\nmodule.exports = function (cmdTranslatorMap) {\n    /**\n     * 게임 유저에 대한 프로세서\n     * @param msg\n     */\n    cmdTranslatorMap.gusers = function (msg) {\n        game.gameUsers = msg.users;\n\n        game.president = -1;\n        game.remainingBidder = 5;\n        game.lastBidder = null;\n\n        room.playing = true;\n        room.viewRoom();\n    };\n\n\n    /**\n     * 덱이 왔을 때 처리\n     * @param msg\n     */\n    cmdTranslatorMap.deck = function (msg) {\n        game.deck = msg.deck;\n        game.viewDeck();\n    };\n\n    /**\n     * 플레이어가 비딩했다는 정보가 들어왔을 때 (본인 포함)\n     * @param msg\n     */\n    cmdTranslatorMap.pbinfo = function (msg) {\n        const $bidderCardContainer = $($('.player-slot .game-card-container')[msg.bidder]);\n\n        // 패스가 아니라면 마지막 공약 업데이트\n        if (msg.bidShape != 'pass') {\n            game.bidShape = msg.bidShape;\n            game.bidCount = msg.bidCount;\n            game.lastBidder = msg.bidder;\n        }\n\n        // 공약 표시\n        $bidderCardContainer.find('.game-card').remove();\n        const $biddingInfo = $('<div/>').addClass('game-card player-card-bidding');\n        if (msg.bidShape == 'pass') {\n            $biddingInfo.text(\"pass\");\n            game.remainingBidder--;\n        }\n        else {\n            $biddingInfo.text(msg.bidShape + ' ' + msg.bidCount);\n        }\n        $bidderCardContainer.append($biddingInfo);\n\n        // 공약 완료 체크\n        if (game.remainingBidder == 1 && game.lastBidder !== null) {\n            if(game.lastBidder != game.selfIndex) {\n                Materialize.toast(\"공약이 끝났습니다. 기다려주세요\", 1500);\n            }\n            game.president = game.lastBidder;\n        }\n    };\n\n    /**\n     * 공약 요청이 들어왔을 때\n     */\n    cmdTranslatorMap.bidrq = function () {\n        // 최소 공약\n        let bidCount = game.bidCount || 13;\n        if (game.bidShape == 'none') bidCount++;\n\n        const $playerCardContainer = $('.player-self .game-card-container');\n\n        const $bidForm = template($playerCardContainer, 'bidding');\n        $bidForm.attr('id', 'bidForm');\n        $bidForm.find('input[name=\"bidCount\"]')\n            .attr('min', bidCount)\n            .val(bidCount);\n        $bidForm.submit(function() {\n            \"use strict\";\n\n            const $bidForm = $('#bidForm');\n            const bidShape = $bidForm.find('*[name=\"bidShape\"]').val();\n            const bidCount = $bidForm.find('*[name=\"bidCount\"]').val();\n            conn.sendCmd('bid', {\n                shape: bidShape,\n                num: parseInt(bidCount)\n            });\n            return false;\n        });\n    };\n\n\n    /**\n     * 1차 공약 수정 요청이 들어왔을 때\n     */\n    cmdTranslatorMap.bc1rq = function () {\n        Materialize.toast('공약을 수정해주세요.', 1500);\n\n        const bidShape = game.bidShape;\n        const bidCount = game.bidCount;\n\n        const $playerCardContainer = $('.player-self .game-card-container');\n        template($playerCardContainer, 'bidding', [\n            [null, ['id', 'bidChangeForm']],\n\n            ['.player-form-title', ['text', \"현재 : \" + game.shapeAbbrTable[bidShape] + bidCount]],\n\n            ['input[name=\"bidCount\"]', [\n                ['min', bidCount],\n                ['val', bidCount]\n            ]],\n\n            ['option[value=\"' + bidShape + '\"]', ['remove']],\n\n            ['option[value=\"pass\"]', [\n                ['val', bidShape],\n                ['text', \"그대로 (\" + game.shapeStringTable[bidShape] + \")\"]\n            ]],\n            [null, ['submit', function() {\n                const $bidChangeForm = $('#bidChangeForm');\n                let bidShape = $bidChangeForm.find('*[name=\"bidShape\"]').val();\n                const bidCount = $bidChangeForm.find('*[name=\"bidCount\"]').val();\n                if (bidShape == game.bidShape && bidCount == game.bidCount) bidShape = 'pass';\n\n                conn.sendCmd('bc1', {\n                    shape: bidShape,\n                    num: parseInt(bidCount)\n                });\n                return false;\n            }]]\n        ]);\n    };\n\n    /**\n     * 1차 공약수정 후 공약을 알린다.\n     * @param msg\n     */\n    cmdTranslatorMap.binfo = function (msg) {\n        $('.player-slot .game-card-container').empty();\n\n        const bidString = game.shapeStringTable[msg.shape] + ' ' + msg.num;\n        Materialize.toast('공약 : ' + bidString, 1500);\n        $('#title').text('openMighty - ' + bidString);\n        game.bidShape = msg.shape;\n        game.bidCount = msg.num;\n        game.president = msg.president;\n        $($('.player-slot')[game.president])\n            .addClass('player-leading player-president');\n    };\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/cmdBidding.js","/**\n * Created by whyask37 on 2017. 1. 20..\n */\n\n\"use strict\";\n\nconst Materialize = window.Materialize;\n\nconst _ = window._;\nconst template = require('./template');\nconst room = require('./room');\nconst game = require('./game');\nconst conn = require('./conn');\nconst mainGame = require('./cmdMainGame');\n\nmodule.exports = function (cmdTranslatorMap) {\n    function genCardMap(bidShape) {\n        return {\n            'mighty': {shape: bidShape == 'spade' ? 'diamond' : 'spade', num: 14},\n            'joker': {shape: 'joker', num: 0},\n            'girudaA': {shape: bidShape, num: 14},\n            'girudaK': {shape: bidShape, num: 13}\n        };\n    }\n\n\n    /**\n     * 프렌드 타입 -> 메세지\n     * @param bidShape\n     * @param friendType\n     * @param msg\n     * @returns {boolean}\n     */\n    function encodeFriend(bidShape, friendType, msg) {\n        const cardMap = genCardMap(bidShape);\n        if(cardMap[friendType]) {\n            const friendCard = cardMap[friendType];\n            msg.ftype = 'card';\n            msg.shape = friendCard.shape;\n            msg.num = friendCard.num;\n            return true;\n        }\n        else if(friendType == 'first') {\n            msg.ftype = 'first';\n            return true;\n        }\n        else if(friendType == 'none') {\n            msg.ftype = 'none';\n            return true;\n        }\n        return false;\n    }\n\n\n    /**\n     * 메세지 -> 프렌드 타입\n     * @param bidShape\n     * @param msg\n     * @returns {*}\n     */\n    function decodeFriend(bidShape, msg) {\n        const cardMap = genCardMap(bidShape);\n\n        if(msg.ftype == 'card') {\n            let ftype = null;\n            _.keys(cardMap).some((key) => {\n                const card = cardMap[key];\n                if(card.shape == msg.args.shape && card.num == msg.args.num) {\n                    ftype = key;\n                    return true;\n                }\n            });\n            return ftype;\n        }\n        else if(msg.ftype == 'first') return 'first';\n        else if(msg.ftype == 'none') return 'none;'\n        else return null;\n    }\n\n    /**\n     * 버려달라는 부탁을 받았을 때.\n     * @param msg\n     */\n    cmdTranslatorMap.fsrq = function () {\n        \"use strict\";\n        Materialize.toast('카드 3장을 버리고 프렌드를 선정하세요', 1500);\n\n\n        // 덱을 선택할 수 있도록 한다.\n        $('.deck-card').click(function() {\n            $(this).toggleClass('deck-card-selected');\n        });\n\n        const bidCount = game.bidCount;\n        const bidShape = game.bidShape;\n\n        const $playerCardContainer = $('.player-self .game-card-container');\n        const $friendSelector = template($playerCardContainer, 'fselect', [\n            [null, ['id', 'friendSelectForm']],\n            ['option[value=' + bidShape + ']', ['remove']],\n            ['input[name=\"bidCount\"]', [\n                ['min', bidCount],\n                ['val', bidCount]\n            ]],\n            ['option[value=\"pass\"]', ['val', bidShape]],\n        ]);\n\n        $friendSelector.submit(function() {\n            const msg = {};\n            const $fSelectForm = $('#friendSelectForm');\n\n            // 고른 카드 선택\n            const cards = $('.deck .deck-card').toArray();\n            const selected = [];\n            for(let i = 0 ; i < cards.length ; i++) {\n                if($(cards[i]).hasClass('deck-card-selected')) {\n                    selected.push(i);\n                }\n            }\n            if(selected.length != 3) {\n                Materialize.toast('3장을 골라주세요.', 1500);\n                return false;\n            }\n            msg.discards = selected;\n\n            // 새로운 공약\n            const bidShape = $fSelectForm.find('*[name=\"bidShape\"]').val();\n            const bidCount = $fSelectForm.find('*[name=\"bidCount\"]').val();\n            if (!(bidShape == game.bidShape && bidCount == game.bidCount)) {\n                console.log(bidShape, bidCount);\n                msg.bidch2 = {\n                    shape: bidShape,\n                    num: parseInt(bidCount)\n                };\n            }\n\n            // 프렌드 선택\n            const friendType = $fSelectForm.find('select[name=friendType]').val();\n            if(!encodeFriend(bidShape, friendType, msg)) {\n                Materialize.toast('프렌드를 선정해주세요.', 1500);\n                return false;\n            }\n\n            conn.sendCmd('fs', msg);\n            return false;\n        });\n    };\n\n\n    /**\n     * 프렌드 선정 완료\n     * @param msg\n     */\n    cmdTranslatorMap.fs = function (msg) {\n        const friendType = decodeFriend(game.bidShape, msg);\n        const friendString = $('#template-fselect').find('option[value=\"' + friendType + '\"]').text() + \" 프렌드\";\n        Materialize.toast(friendString, 2000);\n        game.ftype = msg.ftype;\n        game.fargs = msg.args;\n\n        const $title = $('#title');\n        $title.text($title.text() + ' - ' + friendString);\n\n        mainGame.initGame();\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/cmdFriendSelect.js","/**\n * Created by whyask37 on 2017. 1. 21..\n */\n\n\"use strict\";\n\nconst Materialize = window.Materialize;\n\nconst template = require('./template');\nconst game = require('./game');\nconst room = require('./room');\nconst conn = require('./conn');\n\nfunction issueTrickStart() {\n    unbindClick();\n    game.trick++;\n}\n\nfunction unbindClick() {\n    $('.deck-card')\n        .removeClass('deck-card-selected')\n        .unbind('click');\n}\n\nfunction initGame() {\n    game.trick = 0;\n    game.starter = game.president;\n    issueTrickStart();\n}\n\nfunction decodeCard($card) {\n    const cardIdf = $card.attr('card');\n    const shape = {\n        's': 'spade', 'h': 'heart',\n        'c': 'clover', 'd': 'diamond',\n        'j': 'joker'\n    }[cardIdf[0]];\n    const num = parseInt(cardIdf.substr(1));\n    return {shape: shape, num: num};\n}\n\n\n\nexports = module.exports = function (cmdTranslatorMap) {\n    function filterSelectableCards(msg) {\n        // 조커콜\n        if(msg.jcall) {\n            const jokerCard = $('.game-card-shape-j');\n            if(jokerCard.length !== 0) {\n                jokerCard\n                    .parents('.deck-card')\n                    .addClass('deck-card-selectbale');\n                return;\n            }\n        }\n        // 기존 문양이 있을 경우\n        else if(msg.shaperq) {\n            const $rqShapeCards = $('.game-card-shape-' + msg.shaperq[0]);\n            if($rqShapeCards.length !== 0) {\n                $rqShapeCards\n                    .parents('.deck-card')\n                    .addClass('deck-card-selectable');\n                return;\n            }\n        }\n        $('.deck-card').addClass('deck-card-selectable');\n    }\n\n    /**\n     * 카드를 내라는 요청\n     * @param msg\n     */\n    cmdTranslatorMap.cprq = function (msg) {\n        \"use strict\";\n        Materialize.toast('카드를 내주세요.', 1500);\n\n        const $gameCardContainer = $('.player-self .game-card-container');\n        template($gameCardContainer, 'button', [\n            ['button', [\n                ['text', '카드 내기'],\n                ['disabled', true],\n            ]]\n        ]);\n\n        // 카드 선택 활성화.\n        filterSelectableCards(msg);\n        $('.deck-card-selectable').click(function () {\n            $('.deck-card').removeClass('deck-card-selected');\n            $(this).addClass('deck-card-selected');\n            $gameCardContainer.find('button').prop('disabled', false);\n        });\n\n        // 카드 내기를 할 때\n        $gameCardContainer.find('button').click(function() {\n            const $selected = $('.deck-card-selected');\n            if($selected.length != 1) {\n                Materialize.toast(\"카드를 선택해주세요.\", 1500);\n            }\n\n            const card = decodeCard($selected.find('.game-card'));\n\n            // 조커콜 처리\n            if(game.trick != 1 && card.num == 3 && (\n                game.bidShape == 'clover' && card.shape == 'spade' ||\n                game.bidShape != 'clover' && card.shape == 'clover'\n            )) {\n                const $jokerCallModal = $('#jokerCallModal');\n                $jokerCallModal.find('button[name=no]').click(() => {\n                    conn.sendCmd('cp', {\n                        cardIdx: $selected.index('.deck-card')\n                    });\n                });\n                $jokerCallModal.find('button[name=yes]').click(() => {\n                    conn.sendCmd('cp', {\n                        cardIdx: $selected.index('.deck-card'),\n                        jcall: true\n                    });\n                });\n                $jokerCallModal.modal({\n                    dismissible: false\n                });\n                $jokerCallModal.modal('open');\n            }\n\n            else if(card.shape == 'joker' && game.starter == game.selfIndex) {\n                const $jokerModal = $('#jokerModal');\n                const $callShape = $jokerModal.find('select[name=srq]');\n                $callShape.val('none');\n                $jokerModal.modal({\n                    dismissible: false\n                });\n\n                $jokerModal.find('button').click(() => {\n                    let callShape = $callShape.val();\n                    if(callShape == 'none') callShape = undefined;\n                    conn.sendCmd('cp', {\n                        cardIdx: $selected.index('.deck-card'),\n                        srq: callShape\n                    });\n                });\n                $jokerModal.modal('open');\n            }\n\n            else {\n                // 일반 카드\n                conn.sendCmd('cp', {\n                    cardIdx: $selected.index('.deck-card')\n                });\n            }\n        });\n    };\n\n    /**\n     * 조커로 문양을 부를 때\n     */\n    cmdTranslatorMap.jrq = function (msg) {\n        const shapeRequest = msg.shaperq;\n        Materialize.toast('조커로 ' + game.shapeStringTable[shapeRequest] + '를 불렀습니다.', 2000);\n    };\n\n\n    /**\n     * 다른 플레이어가 카드를 냈을 때\n     */\n    cmdTranslatorMap.pcp = function (msg) {\n        \"use strict\";\n        const card = msg.card;\n\n        const $playerSlot = $($('.player-slot')[msg.player]);\n\n        if(\n            game.ftype == 'card' &&\n            game.fargs.shape == card.shape &&\n            game.fargs.num == card.num\n        ) {\n            // 프렌드 발견\n            $playerSlot.addClass('player-leading');\n        }\n\n\n        const $gameCardContainer = $playerSlot.find('.game-card-container');\n\n        const cardIdf = card.shape[0] + card.num;\n        template($gameCardContainer, 'game-card', [\n            [null, [\n                ['addClass', 'game-card-' + cardIdf],\n                ['card', cardIdf]\n            ]],\n        ]);\n        unbindClick();\n    };\n\n    /**\n     * 트릭이 끝났을 경우\n     */\n    cmdTranslatorMap.tend = function (msg) {\n        const $winnerHas = $($('.player-has')[msg.winner]);\n        const $cards = $('.player-slot .game-card');\n\n        // 카드를 모은다\n        $cards.each(function () {\n            const card = decodeCard($(this));\n            if(card.num >= 10) {\n                let numStr = ['10', 'J', 'Q', 'K', 'A'][card.num - 10];\n                $winnerHas.append(\n                    $('<div/>')\n                        .addClass('has-slot')\n                        .addClass('has-' + card.shape)\n                        .text(numStr)\n                );\n            }\n        });\n\n        // 초구 프렌드\n        if(\n            game.ftype == 'first' &&\n            game.president != msg.winner &&\n            $('.player-leading').length != 2 &&\n            game.trick <= 4\n        ) {\n            // 프렌드 발견\n            $($('.player-slot')[msg.winner]).addClass('player-leading');\n        }\n\n        $cards.fadeOut(1000);\n        game.starter = msg.winner;\n        issueTrickStart();\n    };\n\n    /**\n     * 게임 종료시\n     * @param msg\n     */\n    cmdTranslatorMap.gend = function (msg) {\n        const bid = game.bidCount;\n        const got = 20 - msg.oppcc;\n        const $modal = $('#gameEndModal');\n        const $modalText = $modal.find('.modal-content p');\n        if(got >= bid) $modalText.text('[' + got + '/' + bid + '] 여당 승리입니다.');\n        else $modalText.text('[' + got + '/' + bid + '] 야당 승리입니다.');\n        room.playing = false;\n        $modal.modal({\n            dismissible: true,\n            complete: function() {\n                if(!room.playing) {\n                    room.viewRoom();\n                    $('#title').text('openMighty');\n                }\n            }\n        });\n        $modal.modal('open');\n    };\n\n};\n\nexports.issueTrickStart = issueTrickStart;\nexports.initGame = initGame;\n\n\n\n// WEBPACK FOOTER //\n// ./src/clientjs/game/cmdMainGame.js"],"sourceRoot":""}